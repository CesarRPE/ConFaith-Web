<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Lobster&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <title>ConFaith | El Market de Predicciones que la hace</title>
    
    <link rel="icon" type="image/png" href="https://drive.google.com/thumbnail?id=1BgGDXM7qDTLZApYU9wYzOrSXkkcyIO21&sz=w128">

    <style>
        @font-face {
            font-family: 'Gelapitto';
            src: url('Gelapitto.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
        }

        :root {
            --bg-main: #374151;
            --charcoal: #374151;
            --gold-faith: #b8860b;
            --poly-dark: #121212;
            --glossy-black: linear-gradient(180deg, #2a2a2a 0%, #000000 100%);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-main);
            margin: 0;
            color: var(--charcoal);
        }

        .navbar-custom {
            background: linear-gradient(180deg, #3a3a3a 0%, #000000 100%);
            border-bottom: 4px solid var(--gold-faith);
            padding: 0.75rem 1.25rem;
            position: sticky;
            top: 0;
            z-index: 50;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .brand-con {
            font-family: 'Lobster', cursive;
            background: linear-gradient(180deg, #ff00ff 0%, #d4d400 50%, #00cc00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 1.5em;
            transform: rotate(-3deg);
            display: inline-block;
            filter: drop-shadow(0 0 2px rgba(255,255,255,0.3));
        }

        .brand-faith {
            font-family: 'UnifrakturMaguntia', serif;
            color: var(--gold-faith);
            font-weight: 400;
            line-height: 1;
            letter-spacing: -1.5px;
        }

        .btn-connect-gold {
            background-color: var(--gold-faith);
            color: #000;
            font-weight: 800;
            border: 2px solid var(--gold-faith);
            border-radius: 9999px;
            transition: transform 0.2s;
            cursor: pointer;
        }

        .btn-alt {
            background-color: white;
            color: var(--charcoal);
            border: 2px solid white;
            font-weight: 800;
            border-radius: 9999px;
            cursor: pointer;
        }

        .auth-card {
            background: white;
            border-radius: 28px;
            width: 100%;
            max-width: 400px;
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .slider-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            height: 200px;
            margin-bottom: 70px;
        }

        .slider-box {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 4px;
            background: #000;
            z-index: 10;
        }

        .slider-wrapper {
            display: flex;
            transition: transform 0.8s ease;
            height: 100%;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .card-blush {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 4px solid var(--gold-faith);
            border-radius: 1.5rem;
            padding: 1.5rem;
            min-height: 220px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
        }

        .btn-bet-glossy {
            background: var(--glossy-black);
            color: white;
            font-weight: 800;
            border: 1px solid #333;
            border-radius: 0.75rem;
            transition: all 0.2s;
        }

        .btn-bet-glossy:hover {
            background: var(--gold-faith) !important;
            color: #000;
        }
    </style>
</head>
<body>

    <nav class="navbar-custom flex justify-between items-center shadow-lg">
        <div class="brand-container flex flex-col">
            <div class="flex items-center">
                <span class="brand-con">Con</span>
                <span class="brand-faith text-3xl">Faith</span>
            </div>
            <p class="text-[12px] font-medium text-gray-300" style="font-family: 'Gelapitto', cursive;">Porque manifestando la haces 游뗿</p>
        </div>

        <div id="nav-actions" class="flex items-center gap-4">
            <div id="user-info" class="hidden text-white text-[10px] font-bold mr-2">
                Saldo: <span id="user-balance" class="text-yellow-400">0.00</span> USDC
            </div>
            <button id="btn-reg" onclick="openReg()" class="btn-alt px-5 py-1.5 text-[10px] uppercase font-bold">Registrarse</button>
            <button id="btn-login" onclick="openReg()" class="btn-connect-gold px-5 py-1.5 text-[10px] uppercase font-bold">Conectar</button>
            <button id="btn-logout" onclick="handleLogout()" class="hidden btn-alt px-5 py-1.5 text-[10px] uppercase font-bold">Salir</button>
        </div>
    </nav>

    <header class="max-w-7xl mx-auto py-8 px-6 flex flex-col md:flex-row items-center gap-10">
        <div class="slider-container">
            <div class="slider-box">
                <div class="slider-wrapper" id="sliderWrapper">
                    <div class="slide"><img src="https://drive.google.com/thumbnail?id=1nJPT5wxhd1BEwtcf0IoscQWzevTodgD_&sz=w1000" alt="Slide 1"></div>
                    <div class="slide"><img src="https://larepublica.cronosmedia.glr.pe/original/2025/10/02/68de61e4a7b13eba150b0328.jpg" alt="Slide 2"></div>
                    <div class="slide"><img src="https://i0.wp.com/informateperu.pe/wp-content/uploads/2025/08/Streamers-peruanos-cobran-hasta-12.000-soles-por-presentaciones-en-discotecas-y-generan-polemica-por-sus-exigencias.jpg?resize=750%2C375&ssl=1" alt="Slide 3"></div>
                </div>
            </div>
        </div>

        <div class="text-center md:text-right flex-1 text-white">
            <h2 class="font-black text-3xl leading-tight">Apuestas Por Peruanos <br>Para El Mundo 游왫릖</h2>
            <p class="mt-2 text-yellow-500 font-bold tracking-widest text-[10px] uppercase">Market de Predicciones Real-Time</p>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6">
        <div id="cards-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="card-blush flex flex-col justify-between">
                <div>
                    <span class="text-[9px] font-black px-2 py-1 rounded bg-blue-600 text-white italic">AMPAYS</span>
                    <h3 class="text-lg font-black mt-4 text-slate-800 leading-tight">쯉aldr치 un ampay de un futbolista esta semana en Magaly TV?</h3>
                </div>
                <div class="flex gap-3 mt-6">
                    <button onclick="placeBet('SI')" class="flex-1 btn-bet-glossy py-3 text-xs">S칈</button>
                    <button onclick="placeBet('NO')" class="flex-1 btn-bet-glossy py-3 text-xs">NO</button>
                </div>
            </div>
        </div>
    </main>

    <div id="reg-modal" class="fixed inset-0 z-[200] hidden items-center justify-center p-4 bg-black/80 backdrop-blur-md">
        <div class="auth-card">
            <button onclick="closeReg()" class="absolute top-6 right-6 text-gray-400 text-2xl font-bold">&times;</button>
            <div class="mb-2">
                <span class="brand-con text-2xl">Con</span>
                <span class="brand-faith text-4xl">Faith</span>
            </div>
            <h2 id="modal-title" class="text-xl font-black">칔nete a la Fe</h2>
            <div class="mt-6 space-y-3">
                <input type="email" id="auth-email" placeholder="Email" class="w-full p-4 border rounded-2xl outline-none focus:border-yellow-600">
                <input type="password" id="auth-pass" placeholder="Contrase침a" class="w-full p-4 border rounded-2xl outline-none focus:border-yellow-600">
                <button onclick="handleAuth()" id="btn-auth-action" class="w-full py-4 bg-black text-white rounded-2xl font-black uppercase text-xs">Continuar</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // Configuraci칩n de tu Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC7VOMfWU5JSbs5p11w3BBE1TofvxZpZ5M",
            authDomain: "confaith-web.firebaseapp.com",
            projectId: "confaith-web",
            storageBucket: "confaith-web.appspot.com",
            messagingSenderId: "374229605728",
            appId: "1:374229605728:web:7f6d9e8d479c4a896d8745"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- L칩gica de Usuario ---
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                document.getElementById('nav-actions').querySelectorAll('button:not(#btn-logout)').forEach(b => b.classList.add('hidden'));
                document.getElementById('btn-logout').classList.remove('hidden');
                document.getElementById('user-info').classList.remove('hidden');
                
                const userRef = doc(db, "users", user.uid);
                const userSnap = await getDoc(userRef);
                
                if (!userSnap.exists()) {
                    await setDoc(userRef, { email: user.email, balance: 100 }); // Regalo inicial
                    document.getElementById('user-balance').innerText = "100.00";
                } else {
                    document.getElementById('user-balance').innerText = userSnap.data().balance.toFixed(2);
                }
            } else {
                document.getElementById('btn-logout').classList.add('hidden');
                document.getElementById('user-info').classList.add('hidden');
                document.getElementById('btn-reg').classList.remove('hidden');
                document.getElementById('btn-login').classList.remove('hidden');
            }
        });

        window.handleAuth = async () => {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;
            try {
                // Intentamos login, si falla, registramos (flujo simplificado)
                await signInWithEmailAndPassword(auth, email, pass);
                closeReg();
            } catch (err) {
                try {
                    await createUserWithEmailAndPassword(auth, email, pass);
                    closeReg();
                } catch (regErr) {
                    alert("Error: " + regErr.message);
                }
            }
        };

        window.handleLogout = () => signOut(auth);

        window.placeBet = async (option) => {
            const user = auth.currentUser;
            if(!user) return alert("Conecta tu cuenta para apostar");
            
            const betAmount = 10;
            const userRef = doc(db, "users", user.uid);
            const userSnap = await getDoc(userRef);
            const currentBalance = userSnap.data().balance;

            if(currentBalance >= betAmount) {
                await updateDoc(userRef, { balance: currentBalance - betAmount });
                document.getElementById('user-balance').innerText = (currentBalance - betAmount).toFixed(2);
                alert(`춰Apuesta de ${betAmount} USDC al ${option} registrada!`);
            } else {
                alert("Saldo insuficiente");
            }
        };
    </script>

    <script>
        // L칩gica visual del Slider
        let currentSlide = 0;
        const wrapper = document.getElementById('sliderWrapper');
        setInterval(() => {
            currentSlide = (currentSlide + 1) % 3;
            wrapper.style.transform = `translateX(-${currentSlide * 100}%)`;
        }, 4000);

        function openReg() { document.getElementById('reg-modal').classList.replace('hidden', 'flex'); }
        function closeReg() { document.getElementById('reg-modal').classList.replace('flex', 'hidden'); }
    </script>
</body>
</html>
